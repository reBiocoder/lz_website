(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"9d71":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"q-pa-md"},[a("q-uploader",{ref:"abort",staticStyle:{width:"auto"},attrs:{"field-name":"csv_data",url:e.url,"form-fields":[{name:"table",value:e.table1}]},on:{start:e.uploading_csv,added:e.add_csv,uploaded:e.uploaded},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",{staticClass:"row no-wrap items-center q-pa-sm q-gutter-xs"},[t.queuedFiles.length>0?a("q-btn",{attrs:{icon:"clear_all",round:"",dense:"",flat:""},on:{click:t.removeQueuedFiles}},[a("q-tooltip",[e._v("清楚所有文件")])],1):e._e(),t.uploadedFiles.length>0?a("q-btn",{attrs:{icon:"done_all",round:"",dense:"",flat:""},on:{click:t.removeUploadedFiles}},[a("q-tooltip",[e._v("移除上传文件")])],1):e._e(),t.isUploading?a("q-spinner",{staticClass:"q-uploader__spinner"}):e._e(),a("div",{staticClass:"col-1"},[a("div",{staticClass:"q-uploader__title"},[e._v("请上传csv文件")]),a("div",{staticClass:"q-uploader__subtitle"},[e._v(e._s(t.uploadSizeLabel)+" / "+e._s(t.uploadProgressLabel))])]),a("div",{staticClass:"col"},[e.is_visibled?a("div",{staticClass:"q-gutter-sm"},[a("span",{staticClass:"text-left fit q-pt-md"},[e._v("请选择想要上传到的表：")]),a("q-radio",{attrs:{"keep-color":"",val:"tss",label:"tss",color:"white"},model:{value:e.table1,callback:function(t){e.table1=t},expression:"table1"}}),a("q-radio",{attrs:{"keep-color":"",val:"gen_exp",label:"gen_exp",color:"white"},model:{value:e.table1,callback:function(t){e.table1=t},expression:"table1"}}),a("q-radio",{attrs:{"keep-color":"",val:"utex",label:"utex",color:"white"},model:{value:e.table1,callback:function(t){e.table1=t},expression:"table1"}})],1):e._e()]),t.canAddFiles?a("q-btn",{attrs:{type:"a",icon:"add_box",round:"",dense:"",flat:""}},[a("q-uploader-add-trigger"),a("q-tooltip",[e._v("选择文件")])],1):e._e(),t.canUpload?a("q-btn",{attrs:{icon:"cloud_upload",round:"",dense:"",flat:""},on:{click:t.upload}},[a("q-tooltip",[e._v("点击上传")])],1):e._e(),t.isUploading?a("q-btn",{attrs:{icon:"clear",round:"",dense:"",flat:""},on:{click:t.abort}},[a("q-tooltip",[e._v("放弃上传")])],1):e._e()],1)]}}])})],1),e.is_coled?a("div",{staticClass:"q-pa-md"},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v(e._s(this.table1)+"的表头")]),a("div",[a("table",{staticClass:"text-justify",attrs:{border:"0",cellpadding:"10",cellspacing:"0"}},[a("tr",e._l(this.col,(function(t){return a("th",{staticStyle:{border:"1px solid #f00"}},[e._v(e._s(t))])})),0)]),a("br"),a("p",{staticClass:"text-blue"},[e._v("请注意！ 上传的csv文件的表头需要与上传表格的表头一致，否则会造成一些错误！")])])])],1)],1):e._e()])},l=[],o=a("bca3"),i=a("e669"),n={name:"csv",data:function(){return{is_coled:!1,col:null,url:"/api/upload_csv/",table1:null,is_visibled:!1}},methods:{uploading_csv:function(){null===this.table1&&(this.$q.notify({message:"请选择需要上传的表格"}),this.$refs.abort.abort())},add_csv:function(e){this.is_visibled=!0},uploaded:function(e){var t=JSON.parse(e.xhr.response);"success"===t.code?(this.$q.notify({message:t.info,color:"purple",position:"bottom",icon:"done"}),this.$refs.abort.reset(),this.is_visibled=!1):this.$q.notify({message:t.info})}},watch:{table1:function(e,t){var a=this,s="undefined"!==typeof i["a"]?i["a"]:Quasar.components.QSpinnerFacebook;this.$q.loading.show({spinner:s,spinnerColor:"purple",spinnerSize:140,message:"正在处理请求，获取表头中..."}),o["a"].getColKeys({col_name:e},(function(e){a.$q.loading.hide(),a.col=e.data.data.col_keys,a.is_coled=!0,console.log(e.data)}))}}},d=n,c=a("2877"),r=a("eebe"),p=a.n(r),u=a("ee89"),_=a("9c40"),b=a("05c0"),v=a("0d59"),f=a("3786"),g=a("cc04"),q=a("f09f"),h=a("a370"),m=Object(c["a"])(d,s,l,!1,null,"059d0171",null);t["default"]=m.exports;p()(m,"components",{QUploader:u["a"],QBtn:_["a"],QTooltip:b["a"],QSpinner:v["a"],QRadio:f["a"],QUploaderAddTrigger:g["a"],QCard:q["a"],QCardSection:h["a"]})},bca3:function(e,t,a){"use strict";var s=a("2b0e"),l=s["a"].prototype.$post;t["a"]={getLogin:function(e,t){l("api/login/",e,t)},getRegister:function(e,t){l("api/register/",e,t)},uploadCsv:function(e,t){l("/api/upload_csv/",e,t)},getColKeys:function(e,t){l("api/get_col_keys/",e,t)}}}}]);